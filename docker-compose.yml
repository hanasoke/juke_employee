version: "3.8"

services:
  employee-db: 
    image: oscarfonts/h2 
    container_name: employee-h2-db 
    ports: 
      - "1521:1521"
      - "8082:81"
    environment: 
      - H2_OPTIONS=-ifNotExists
    volumes: 
      - h2-data:/opt/h2-data 
    restart: unless-stopped 
    networks: 
      - employee-network 
    
  employee-api:
    build: .
    container_name: employee-management-api
    ports:
      - "8080:8080"
    environment:
      - SPRING_DATASOURCE_URL=jdbc:h2:tcp://employee-db:1521/~/employeedb
      - SPRING_DATASOURCE_USERNAME=sa 
      - SPRING_DATASOURCE_PASSWORD=password 
      - SPRING_H2_CONSOLE_ENABLED=true 
    depends_on:
      - employee-db 
    restart: unless-stopped
    networks:
      - employee-network 

volumes: 
  h2-data: 

networks: 
  employee-network: 
    driver: bridge 